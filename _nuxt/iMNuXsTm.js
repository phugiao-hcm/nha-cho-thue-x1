import{h as S,L as b,f as G,M as q,N as U,O as $,P as V,Q as H,A as z,R as X,r as Y,S as R,U as Q,E as W,V as x,k as F,W as Z,X as C,s as B,Y as J,Z as A}from"./CAtcDqZa.js";const k={trailing:!0};function K(e,a=25,s={}){if(s={...k,...s},!Number.isFinite(a))throw new TypeError("Expected `wait` to be a finite number");let r,n,i=[],t,y;const d=(m,o)=>(t=ee(e,m,o),t.finally(()=>{if(t=null,s.trailing&&y&&!n){const h=d(m,y);return y=null,h}}),t);return function(...m){return t?(s.trailing&&(y=m),t):new Promise(o=>{const h=!n&&s.leading;clearTimeout(n),n=setTimeout(()=>{n=null;const _=s.leading?r:d(this,m);for(const D of i)D(_);i=[]},a),h?(r=d(this,m),o(r)):i.push(o)})}}async function ee(e,a,s){return await e.apply(a,s)}const ae=Symbol.for("nuxt:client-only");function te(...e){const a=typeof e[e.length-1]=="string"?e.pop():void 0;ne(e[0],e[1])&&e.unshift(a);let[s,r,n={}]=e;const i=S(()=>b(s));if(typeof i.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof r!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const t=G();n.server??=!0,n.default??=se,n.getCachedData??=I,n.lazy??=!1,n.immediate??=!0,n.deep??=q.deep,n.dedupe??="cancel",n._functionName,t._asyncData[i.value];const y={cause:"initial",dedupe:n.dedupe};t._asyncData[i.value]?._init||(y.cachedData=n.getCachedData(i.value,t,{cause:"initial"}),t._asyncData[i.value]=E(t,i.value,r,n,y.cachedData));const d=t._asyncData[i.value];d._deps++;const m=()=>t._asyncData[i.value].execute(y),o=n.server!==!1&&t.payload.serverRendered;{let D=function(c){const f=t._asyncData[c];f?._deps&&(f._deps--,f._deps===0&&f?._off())};const u=U();if(u&&o&&n.immediate&&!u.sp&&(u.sp=[]),u&&!u._nuxtOnBeforeMountCbs){u._nuxtOnBeforeMountCbs=[];const c=u._nuxtOnBeforeMountCbs;$(()=>{c.forEach(f=>{f()}),c.splice(0,c.length)}),V(()=>c.splice(0,c.length))}const p=u&&(u._nuxtClientOnly||H(ae,!1));o&&t.isHydrating&&(d.error.value||d.data.value!==void 0)?d.status.value=d.error.value?"error":"success":u&&(!p&&t.payload.serverRendered&&t.isHydrating||n.lazy)&&n.immediate?u._nuxtOnBeforeMountCbs.push(m):n.immediate&&d.status.value!=="success"&&m();const v=Z(),g=z([i,...n.watch||[]],([c],[f])=>{if((c||f)&&c!==f){const N=t._asyncData[f]?.data.value!==void 0,O=t._asyncDataPromises[f]!==void 0;f&&D(f);const w={cause:"initial",dedupe:n.dedupe};if(!t._asyncData[c]?._init){let P;f&&N?P=t._asyncData[f]?.data.value:(P=n.getCachedData(c,t,{cause:"initial"}),w.cachedData=P),t._asyncData[c]=E(t,c,r,n,P)}t._asyncData[c]._deps++,(n.immediate||N||O)&&t._asyncData[c].execute(w)}else d._execute({cause:"watch",dedupe:n.dedupe})},{flush:"sync"});v&&X(()=>{g(),D(i.value)})}const h={data:T(()=>t._asyncData[i.value]?.data),pending:T(()=>t._asyncData[i.value]?.pending),status:T(()=>t._asyncData[i.value]?.status),error:T(()=>t._asyncData[i.value]?.error),refresh:(...D)=>t._asyncData[i.value].execute(...D),execute:(...D)=>t._asyncData[i.value].execute(...D),clear:()=>M(t,i.value)},_=Promise.resolve(t._asyncDataPromises[i.value]).then(()=>h);return Object.assign(_,h),_}function T(e){return S({get(){return e()?.value},set(a){const s=e();s&&(s.value=a)}})}function ne(e,a){return!(typeof e=="string"||typeof e=="object"&&e!==null||typeof e=="function"&&typeof a=="function")}function M(e,a){a in e.payload.data&&(e.payload.data[a]=void 0),a in e.payload._errors&&(e.payload._errors[a]=void 0),e._asyncData[a]&&(e._asyncData[a].data.value=F(e._asyncData[a]._default()),e._asyncData[a].error.value=void 0,e._asyncData[a].status.value="idle"),a in e._asyncDataPromises&&(e._asyncDataPromises[a]&&(e._asyncDataPromises[a].cancelled=!0),e._asyncDataPromises[a]=void 0)}function re(e,a){const s={};for(const r of a)s[r]=e[r];return s}function E(e,a,s,r,n){e.payload._errors[a]??=void 0;const i=r.getCachedData!==I,t=s,y=r.deep?Y:R,d=n!==void 0,m=e.hook("app:data:refresh",async h=>{(!h||h.includes(a))&&await o.execute({cause:"refresh:hook"})}),o={data:y(d?n:r.default()),pending:S(()=>o.status.value==="pending"),error:Q(e.payload._errors,a),status:R("idle"),execute:(...h)=>{const[_,D=void 0]=h,u=_&&D===void 0&&typeof _=="object"?_:{};if(e._asyncDataPromises[a]){if((u.dedupe??r.dedupe)==="defer")return e._asyncDataPromises[a];e._asyncDataPromises[a].cancelled=!0}{const v="cachedData"in u?u.cachedData:r.getCachedData(a,e,{cause:u.cause??"refresh:manual"});if(v!==void 0)return e.payload.data[a]=o.data.value=v,o.error.value=void 0,o.status.value="success",Promise.resolve(v)}o.status.value="pending";const p=new Promise((v,g)=>{try{v(t(e))}catch(c){g(c)}}).then(async v=>{if(p.cancelled)return e._asyncDataPromises[a];let g=v;r.transform&&(g=await r.transform(v)),r.pick&&(g=re(g,r.pick)),e.payload.data[a]=g,o.data.value=g,o.error.value=void 0,o.status.value="success"}).catch(v=>{if(p.cancelled)return e._asyncDataPromises[a];o.error.value=x(v),o.data.value=F(r.default()),o.status.value="error"}).finally(()=>{p.cancelled||delete e._asyncDataPromises[a]});return e._asyncDataPromises[a]=p,e._asyncDataPromises[a]},_execute:K((...h)=>o.execute(...h),0,{leading:!0}),_default:r.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{m(),e._asyncData[a]?._init&&(e._asyncData[a]._init=!1),i||W(()=>{e._asyncData[a]?._init||(M(e,a),o.execute=()=>Promise.resolve())})}};return o}const se=()=>{},I=(e,a,s)=>{if(a.isHydrating)return a.payload.data[e];if(s.cause!=="refresh:manual"&&s.cause!=="refresh:hook")return a.static.data[e]};function L(e,a,s){const[r={},n]=typeof a=="string"?[{},a]:[a,s],i=S(()=>b(e)),t=S(()=>b(r.key)||"$f"+C([n,typeof i.value=="string"?i.value:"",...ie(r)]));if(!r.baseURL&&typeof i.value=="string"&&i.value[0]==="/"&&i.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:y,lazy:d,default:m,transform:o,pick:h,watch:_,immediate:D,getCachedData:u,deep:p,dedupe:v,...g}=r,c=B({...J,...g,cache:typeof r.cache=="boolean"?void 0:r.cache}),f={server:y,lazy:d,default:m,transform:o,pick:h,immediate:D,getCachedData:u,deep:p,dedupe:v,watch:_===!1?[]:[..._||[],c]};let N;return te(_===!1?t.value:t,()=>{N?.abort?.(new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),N=typeof AbortController<"u"?new AbortController:{};const w=b(r.timeout);let P;return w&&(P=setTimeout(()=>N.abort(new DOMException("Request aborted due to timeout.","AbortError")),w),N.signal.onabort=()=>clearTimeout(P)),(r.$fetch||globalThis.$fetch)(i.value,{signal:N.signal,...c}).finally(()=>{clearTimeout(P)})},f)}function ie(e){const a=[b(e.method)?.toUpperCase()||"GET",b(e.baseURL)];for(const s of[e.params||e.query]){const r=b(s);if(!r)continue;const n={};for(const[i,t]of Object.entries(r))n[b(i)]=b(t);a.push(n)}if(e.body){const s=b(e.body);if(!s)a.push(C(s));else if(s instanceof ArrayBuffer)a.push(C(Object.fromEntries([...new Uint8Array(s).entries()].map(([r,n])=>[r,n.toString()]))));else if(s instanceof FormData){const r={};for(const n of s.entries()){const[i,t]=n;r[i]=t instanceof File?t.name:t}a.push(C(r))}else if(A(s))a.push(C(B(s)));else try{a.push(C(s))}catch{console.warn("[useFetch] Failed to hash body",s)}}return a}function le(e){return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(e)}function ue(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-")}const j="https://api.kongricsstudio.com/api",l={NearMarket:1,NearSchool:2,NearHospital:3,NearBusStation:4,NearIndustrialPark:5,NearResidentialArea:6,NearPeopleCommittee:7,NearGasStation:8,NearGreenGrocery:9,NearConvenienceStore:10,NearSupermarket:11,NearPark:12,NearGym:13,NearCafe:14,NearRestaurant:15,NearCinema:16,NearShoppingMall:17,NearAirport:18,NearTrainStation:19},fe=[{label:"Chợ",value:l.NearMarket},{label:"Trường học",value:l.NearSchool},{label:"Bệnh viện",value:l.NearHospital},{label:"Bến xe/bus",value:l.NearBusStation},{label:"Khu công nghiệp",value:l.NearIndustrialPark},{label:"Khu dân cư an ninh",value:l.NearResidentialArea},{label:"Ủy ban nhân dân",value:l.NearPeopleCommittee},{label:"Trạm xăng",value:l.NearGasStation},{label:"Bách hóa xanh",value:l.NearGreenGrocery},{label:"Cửa hàng tiện lợi",value:l.NearConvenienceStore},{label:"Siêu thị",value:l.NearSupermarket},{label:"Công viên",value:l.NearPark},{label:"Phòng gym",value:l.NearGym},{label:"Quán cà phê",value:l.NearCafe},{label:"Nhà hàng",value:l.NearRestaurant},{label:"Rạp chiếu phim",value:l.NearCinema},{label:"Trung tâm thương mại",value:l.NearShoppingMall},{label:"Sân bay",value:l.NearAirport},{label:"Ga tàu",value:l.NearTrainStation}];function de(e={}){return L(`${j}/v1/phongtro/getPhongTroList`,{params:{page:1,provinceId:28,wardId:"",price:"",square:null,areaId:null,facility:"",limit:10,keyword:"",roomType:null,...e}},"$VXOqjT9qwx")}function he(e){return L(`${j}/v1/phongtro/getPhongTroDetail`,{params:{id:e}},"$eXY3eLHyPv")}export{fe as S,he as a,le as f,ue as s,de as u};
