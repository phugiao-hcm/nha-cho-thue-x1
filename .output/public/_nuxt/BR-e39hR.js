import{h as S,L as p,f as U,M as V,N as H,O as z,P as W,Q as X,A as F,R as Y,S as Q,k as M,r as Z,U as B,V as J,E as x,W as k,X as A,Y as P,s as L,Z as K,$ as ee}from"#entry";const ae={trailing:!0};function te(e,a=25,i={}){if(i={...ae,...i},!Number.isFinite(a))throw new TypeError("Expected `wait` to be a finite number");let r,t,u=[],s,n;const _=(c,v)=>(s=ne(e,c,v),s.finally(()=>{if(s=null,i.trailing&&n&&!t){const b=_(c,n);return n=null,b}}),s),D=function(...c){return i.trailing&&(n=c),s||new Promise(v=>{const b=!t&&i.leading;clearTimeout(t),t=setTimeout(()=>{t=null;const d=i.leading?r:_(this,c);n=null;for(const f of u)f(d);u=[]},a),b?(r=_(this,c),v(r)):u.push(v)})},o=c=>{c&&(clearTimeout(c),t=null)};return D.isPending=()=>!!t,D.cancel=()=>{o(t),u=[],n=null},D.flush=()=>{if(o(t),!n||s)return;const c=n;return n=null,_(this,c)},D}async function ne(e,a,i){return await e.apply(a,i)}const re=Symbol.for("nuxt:client-only");function se(...e){const a=typeof e[e.length-1]=="string"?e.pop():void 0;ie(e[0],e[1])&&e.unshift(a);let[i,r,t={}]=e,u=!1;const s=S(()=>p(i));if(typeof s.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof r!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const n=U();t.server??=!0,t.default??=ce,t.getCachedData??=G,t.lazy??=!1,t.immediate??=!0,t.deep??=V.deep,t.dedupe??="cancel",t._functionName,n._asyncData[s.value];function _(){const d={cause:"initial",dedupe:t.dedupe};return n._asyncData[s.value]?._init||(d.cachedData=t.getCachedData(s.value,n,{cause:"initial"}),n._asyncData[s.value]=I(n,s.value,r,t,d.cachedData)),()=>n._asyncData[s.value].execute(d)}const D=_(),o=n._asyncData[s.value];o._deps++;const c=t.server!==!1&&n.payload.serverRendered;{let d=function(l){const m=n._asyncData[l];m?._deps&&(m._deps--,m._deps===0&&m?._off())};const f=H();if(f&&c&&t.immediate&&!f.sp&&(f.sp=[]),f&&!f._nuxtOnBeforeMountCbs){f._nuxtOnBeforeMountCbs=[];const l=f._nuxtOnBeforeMountCbs;z(()=>{l.forEach(m=>{m()}),l.splice(0,l.length)}),W(()=>l.splice(0,l.length))}const y=f&&(f._nuxtClientOnly||X(re,!1));c&&n.isHydrating&&(o.error.value||o.data.value!==void 0)?o.status.value=o.error.value?"error":"success":f&&(!y&&n.payload.serverRendered&&n.isHydrating||t.lazy)&&t.immediate?f._nuxtOnBeforeMountCbs.push(D):t.immediate&&o.status.value!=="success"&&D();const g=Q(),N=F(s,(l,m)=>{if((l||m)&&l!==m){u=!0;const C=n._asyncData[m]?.data.value!==void 0,w=n._asyncDataPromises[m]!==void 0,E={cause:"initial",dedupe:t.dedupe};if(!n._asyncData[l]?._init){let T;m&&C?T=n._asyncData[m].data.value:(T=t.getCachedData(l,n,{cause:"initial"}),E.cachedData=T),n._asyncData[l]=I(n,l,r,t,T)}n._asyncData[l]._deps++,m&&d(m),(t.immediate||C||w)&&n._asyncData[l].execute(E),A(()=>{u=!1})}},{flush:"sync"}),R=t.watch?F(t.watch,()=>{u||o._execute({cause:"watch",dedupe:t.dedupe})}):()=>{};g&&Y(()=>{N(),R(),d(s.value)})}const v={data:O(()=>n._asyncData[s.value]?.data),pending:O(()=>n._asyncData[s.value]?.pending),status:O(()=>n._asyncData[s.value]?.status),error:O(()=>n._asyncData[s.value]?.error),refresh:(...d)=>n._asyncData[s.value]?._init?n._asyncData[s.value].execute(...d):_()(),execute:(...d)=>v.refresh(...d),clear:()=>j(n,s.value)},b=Promise.resolve(n._asyncDataPromises[s.value]).then(()=>v);return Object.assign(b,v),b}function O(e){return S({get(){return e()?.value},set(a){const i=e();i&&(i.value=a)}})}function ie(e,a){return!(typeof e=="string"||typeof e=="object"&&e!==null||typeof e=="function"&&typeof a=="function")}function j(e,a){a in e.payload.data&&(e.payload.data[a]=void 0),a in e.payload._errors&&(e.payload._errors[a]=void 0),e._asyncData[a]&&(e._asyncData[a].data.value=M(e._asyncData[a]._default()),e._asyncData[a].error.value=void 0,e._asyncData[a].status.value="idle"),a in e._asyncDataPromises&&(e._asyncDataPromises[a]&&(e._asyncDataPromises[a].cancelled=!0),e._asyncDataPromises[a]=void 0)}function oe(e,a){const i={};for(const r of a)i[r]=e[r];return i}function I(e,a,i,r,t){e.payload._errors[a]??=void 0;const u=r.getCachedData!==G,s=i,n=r.deep?Z:B,_=t!==void 0,D=e.hook("app:data:refresh",async c=>{(!c||c.includes(a))&&await o.execute({cause:"refresh:hook"})}),o={data:n(_?t:r.default()),pending:S(()=>o.status.value==="pending"),error:J(e.payload._errors,a),status:B("idle"),execute:(...c)=>{const[v,b=void 0]=c,d=v&&b===void 0&&typeof v=="object"?v:{};if(e._asyncDataPromises[a]){if((d.dedupe??r.dedupe)==="defer")return e._asyncDataPromises[a];e._asyncDataPromises[a].cancelled=!0}{const y="cachedData"in d?d.cachedData:r.getCachedData(a,e,{cause:d.cause??"refresh:manual"});if(y!==void 0)return e.payload.data[a]=o.data.value=y,o.error.value=void 0,o.status.value="success",Promise.resolve(y)}o.status.value="pending";const f=new Promise((y,g)=>{try{y(s(e))}catch(N){g(N)}}).then(async y=>{if(f.cancelled)return e._asyncDataPromises[a];let g=y;r.transform&&(g=await r.transform(y)),r.pick&&(g=oe(g,r.pick)),e.payload.data[a]=g,o.data.value=g,o.error.value=void 0,o.status.value="success"}).catch(y=>{if(f.cancelled)return e._asyncDataPromises[a];o.error.value=k(y),o.data.value=M(r.default()),o.status.value="error"}).finally(()=>{f.cancelled||delete e._asyncDataPromises[a]});return e._asyncDataPromises[a]=f,e._asyncDataPromises[a]},_execute:te((...c)=>o.execute(...c),0,{leading:!0}),_default:r.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{D(),e._asyncData[a]?._init&&(e._asyncData[a]._init=!1),u||x(()=>{e._asyncData[a]?._init||(j(e,a),o.execute=()=>Promise.resolve())})}};return o}const ce=()=>{},G=(e,a,i)=>{if(a.isHydrating)return a.payload.data[e];if(i.cause!=="refresh:manual"&&i.cause!=="refresh:hook")return a.static.data[e]};function q(e,a,i){const[r={},t]=typeof a=="string"?[{},a]:[a,i],u=S(()=>p(e)),s=S(()=>p(r.key)||"$f"+P([t,typeof u.value=="string"?u.value:"",...le(r)]));if(!r.baseURL&&typeof u.value=="string"&&u.value[0]==="/"&&u.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:n,lazy:_,default:D,transform:o,pick:c,watch:v,immediate:b,getCachedData:d,deep:f,dedupe:y,...g}=r,N=L({...K,...g,cache:typeof r.cache=="boolean"?void 0:r.cache}),R={server:n,lazy:_,default:D,transform:o,pick:c,immediate:b,getCachedData:d,deep:f,dedupe:y,watch:v===!1?[]:[...v||[],N]};let l;return se(v===!1?s.value:s,()=>{l?.abort?.(new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),l=typeof AbortController<"u"?new AbortController:{};const C=p(r.timeout);let w;return C&&(w=setTimeout(()=>l.abort(new DOMException("Request aborted due to timeout.","AbortError")),C),l.signal.onabort=()=>clearTimeout(w)),(r.$fetch||globalThis.$fetch)(u.value,{signal:l.signal,...N}).finally(()=>{clearTimeout(w)})},R)}function le(e){const a=[p(e.method)?.toUpperCase()||"GET",p(e.baseURL)];for(const i of[e.params||e.query]){const r=p(i);if(!r)continue;const t={};for(const[u,s]of Object.entries(r))t[p(u)]=p(s);a.push(t)}if(e.body){const i=p(e.body);if(!i)a.push(P(i));else if(i instanceof ArrayBuffer)a.push(P(Object.fromEntries([...new Uint8Array(i).entries()].map(([r,t])=>[r,t.toString()]))));else if(i instanceof FormData){const r={};for(const t of i.entries()){const[u,s]=t;r[u]=s instanceof File?s.name:s}a.push(P(r))}else if(ee(i))a.push(P(L(i)));else try{a.push(P(i))}catch{console.warn("[useFetch] Failed to hash body",i)}}return a}function fe(e){return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(e)}function de(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-")}const $="https://api.kongricsstudio.com/api",h={NearMarket:1,NearSchool:2,NearHospital:3,NearBusStation:4,NearIndustrialPark:5,NearResidentialArea:6,NearPeopleCommittee:7,NearGasStation:8,NearGreenGrocery:9,NearConvenienceStore:10,NearSupermarket:11,NearPark:12,NearGym:13,NearCafe:14,NearRestaurant:15,NearCinema:16,NearShoppingMall:17,NearAirport:18,NearTrainStation:19},he=[{label:"Chợ",value:h.NearMarket},{label:"Trường học",value:h.NearSchool},{label:"Bệnh viện",value:h.NearHospital},{label:"Bến xe/bus",value:h.NearBusStation},{label:"Khu công nghiệp",value:h.NearIndustrialPark},{label:"Khu dân cư an ninh",value:h.NearResidentialArea},{label:"Ủy ban nhân dân",value:h.NearPeopleCommittee},{label:"Trạm xăng",value:h.NearGasStation},{label:"Bách hóa xanh",value:h.NearGreenGrocery},{label:"Cửa hàng tiện lợi",value:h.NearConvenienceStore},{label:"Siêu thị",value:h.NearSupermarket},{label:"Công viên",value:h.NearPark},{label:"Phòng gym",value:h.NearGym},{label:"Quán cà phê",value:h.NearCafe},{label:"Nhà hàng",value:h.NearRestaurant},{label:"Rạp chiếu phim",value:h.NearCinema},{label:"Trung tâm thương mại",value:h.NearShoppingMall},{label:"Sân bay",value:h.NearAirport},{label:"Ga tàu",value:h.NearTrainStation}];function ve(e={}){return q(`${$}/v1/phongtro/getPhongTroList`,{params:{page:1,provinceId:28,wardId:"",price:"",square:null,areaId:null,facility:"",limit:10,keyword:"",roomType:null,...e}},"$VXOqjT9qwx")}function me(e){return q(`${$}/v1/phongtro/getPhongTroDetail`,{params:{id:e}},"$eXY3eLHyPv")}export{he as S,me as a,fe as f,de as s,ve as u};
